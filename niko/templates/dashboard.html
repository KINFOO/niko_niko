<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>How do you feel?</title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet">
    <style type="text/css">
		a, a:hover{
			color: inherit;
			text-decoration: none;
		}
		.moods{
	        font-size: 4em;
	    }
		.vote-icon{
	        font-size: 5em;
    }
    </style>
</head>
<body>
{% spaceless %}
	<div class="jumbotron">
		<div class="container">
			<div class="row">
				<div class="col-md-12"><h1>Hey. <small>Look at the current mood.</small></h1></div>
			</div>
			<div class="row">
				<div class="col-md-9 text-right">
					<form class="form-inline" role="form">
						<div class="form-group">
							<label class="sr-only" for="day">Day</label>
							<input type="text" id="day" class="form-control" placeholder="dd"/>
						</div>/
						<div class="form-group">
							<label class="sr-only" for="month">Month</label>
							<input type="text" id="month" class="form-control" placeholder="mm"/>
						</div>/
						<div class="form-group">
							<label class="sr-only" for="year">Year</label>
							<input type="text" id="year" class="form-control" placeholder="yyyy"/>
						</div>
						<a class="btn-lg btn-default" id="withDate">Go</a>
					</form>
				</div>
				<div class="col-md-3">
					<a href="{% url 'vote' %}" class="btn-lg btn-default">Vote</a>&nbsp;
					{% if day and month and year %}
						<a href="{% url 'dashboard_dated' poll.slug year month day %}" class="btn-lg btn-default"><i class="icon-refresh"></i></a>&nbsp;
					{% endif %}
					<a href="{% url 'dashboard' poll.slug %}" class="btn-lg btn-default"><i class="icon-home"></i></a>
				</div>
			</div>
		</div>
	</div>
	<div class="container">
		{% if error or success %}
			<div class="row">
				{% if error %}
					<div class="col-md-12 alert alert-danger text-center">{{ error }}</div>
				{% elif success %}
					<div class="col-md-12 alert alert-success text-center">{{ success }}</div>
				{% endif %}
			</div>
		{% endif %}
		<div class="row">
			<div class="moods col-md-4 text-center">
				<p class="text-danger"><i class="icon-frown"> {{ bads|floatformat:1 }}%</i></p>
			</div>
			<div class="moods col-md-4 text-center">
				<p class="text-warning"><i class="icon-meh"> {{ oks|floatformat:1 }}%</i></p>
			</div>
			<div class="moods col-md-4 text-center">
				<p class="text-success"><i class="icon-smile"> {{ greats|floatformat:1 }}%</i></p>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				{% if day and month and year %}
					<h1 class="text-center">Since {{ day }} / {{ month }} / {{year}}</h1>
				{% else %}
					<h1 class="text-center">Lastests</h1>
				{% endif %}
				{% for vote in votes %}
					{% if Vote.GREAT == vote.mood %}
						<span class="text-success vote-icon"><i class="icon-smile">&nbsp;</i></span>
					{% elif Vote.OK == vote.mood %}
						<span class="text-warning vote-icon"><i class="icon-meh">&nbsp;</i></span>
					{% elif Vote.BAD == vote.mood %}
						<span class="text-danger vote-icon"><i class="icon-frown">&nbsp;</i></span>
					{% endif %}
				{% empty %}
					<div class="col-md-12 alert alert-info text-center">No vote so far <i class="icon-smile"></i>.</div>
				{% endfor %}
			</div>
		</div>
	</div>
	<!-- Yes, I want it to load fast. -->
	<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			$("#withDate").click(function(){
				var day   = $("#day").val();
				var month = $("#month").val();
				var year  = $("#year").val();
				if ( ! day || ! month || ! year ){
					alert('Please specify a date');
				}else{
					var url = 'http://{{hostname}}{% url 'dashboard' poll.slug %}';
					url = url + year +"/"+ month +"/"+ day;
					window.location.replace(url);
				}
			});
		});
    </script>
{% endspaceless %} 
</body>
</html>
